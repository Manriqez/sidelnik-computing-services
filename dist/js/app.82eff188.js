(function(t){function e(e){for(var a,r,n=e[0],i=e[1],l=e[2],d=0,h=[];d<n.length;d++)r=n[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&h.push(s[r][0]),s[r]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);u&&u(e);while(h.length)h.shift()();return o.push.apply(o,l||[]),c()}function c(){for(var t,e=0;e<o.length;e++){for(var c=o[e],a=!0,n=1;n<c.length;n++){var i=c[n];0!==s[i]&&(a=!1)}a&&(o.splice(e--,1),t=r(r.s=c[0]))}return t}var a={},s={app:0},o=[];function r(e){if(a[e])return a[e].exports;var c=a[e]={i:e,l:!1,exports:{}};return t[e].call(c.exports,c,c.exports,r),c.l=!0,c.exports}r.m=t,r.c=a,r.d=function(t,e,c){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:c})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var c=Object.create(null);if(r.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(c,a,function(e){return t[e]}.bind(null,a));return c},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],i=n.push.bind(n);n.push=e,n=n.slice();for(var l=0;l<n.length;l++)e(n[l]);var u=i;o.push([0,"chunk-vendors"]),c()})({0:function(t,e,c){t.exports=c("56d7")},"00c4":function(t,e,c){"use strict";c("a227")},"0224":function(t,e,c){"use strict";c("a12e")},"0876":function(t,e,c){},"17b7":function(t,e,c){"use strict";c("4eb0")},3288:function(t,e,c){"use strict";c("aac9")},"4eb0":function(t,e,c){},"56d7":function(t,e,c){"use strict";c.r(e);var a=c("7a23");function s(t,e,c,s,o,r){const n=Object(a["D"])("TheHeader"),i=Object(a["D"])("router-view");return Object(a["v"])(),Object(a["g"])("div",null,[Object(a["j"])(n,{categories:t.categories,userData:t.userData,isAuthorized:t.isAuthorized,isAdmin:t.isAdmin},null,8,["categories","userData","isAuthorized","isAdmin"]),Object(a["j"])(i)])}const o=t=>(Object(a["y"])("data-v-41ba5cf0"),t=t(),Object(a["w"])(),t),r={class:"header"},n={class:"nav-wrapper"},i={class:"right"},l={key:0},u=Object(a["i"])("Управление контентом"),d={key:1},h=Object(a["i"])("Чат с поставщиком"),b={class:"dropdown-trigger"},O=o(()=>Object(a["h"])("a",{href:"#"},[Object(a["i"])("Категории"),Object(a["h"])("i",{class:"material-icons right"},"arrow_drop_down")],-1)),j={class:"dropdown-content"},p={key:2},g={key:3},m=Object(a["i"])("Войти");function v(t,e,c,s,o,v){const f=Object(a["D"])("router-link");return Object(a["v"])(),Object(a["g"])("header",r,[Object(a["h"])("nav",null,[Object(a["h"])("div",n,[Object(a["h"])("ul",i,[c.isAdmin?(Object(a["v"])(),Object(a["g"])("li",l,[Object(a["j"])(f,{to:"/admin/products-manager"},{default:Object(a["N"])(()=>[u]),_:1})])):Object(a["f"])("",!0),c.isAuthorized?(Object(a["v"])(),Object(a["g"])("li",d,[Object(a["j"])(f,{to:"/chat"},{default:Object(a["N"])(()=>[h]),_:1})])):Object(a["f"])("",!0),Object(a["h"])("li",b,[O,Object(a["h"])("ul",j,[(Object(a["v"])(!0),Object(a["g"])(a["a"],null,Object(a["B"])(c.categories,t=>(Object(a["v"])(),Object(a["g"])("li",{key:t._id},[Object(a["j"])(f,{to:"/category/"+t._id},{default:Object(a["N"])(()=>[Object(a["i"])(Object(a["G"])(t.title),1)]),_:2},1032,["to"])]))),128))])]),c.isAuthorized?(Object(a["v"])(),Object(a["g"])("div",p,[Object(a["h"])("li",null,[Object(a["h"])("a",null,Object(a["G"])(c.userData.username),1)]),Object(a["h"])("li",null,[Object(a["h"])("a",{onClick:e[0]||(e[0]=Object(a["P"])((...t)=>v.logout&&v.logout(...t),["prevent"]))},"Выйти")])])):Object(a["f"])("",!0),c.isAuthorized?Object(a["f"])("",!0):(Object(a["v"])(),Object(a["g"])("div",g,[Object(a["j"])(f,{to:"/auth"},{default:Object(a["N"])(()=>[m]),_:1})]))])])])])}var f=c("5502"),y={name:"TheHeader",props:{categories:{type:Array,default:()=>[]},userData:{type:Object,default:()=>{}},isAuthorized:{type:Boolean,default:!1},isAdmin:{type:Boolean,default:!1}},methods:{...Object(f["b"])({fetchLogout:"fetchLogout"}),async logout(){await this.fetchLogout(),this.$router.replace({path:"/"})}}},w=(c("becc"),c("6b0d")),C=c.n(w);const k=C()(y,[["render",v],["__scopeId","data-v-41ba5cf0"]]);var P=k,D={name:"App",components:{TheHeader:P},data(){return{socket:""}},computed:{...Object(f["c"])({categories:"categories",userData:"userData",isAuthorized:"isAuthorized",isAdmin:"isAdmin"})},methods:{...Object(f["b"])({fetchCategories:"fetchCategories",fetchUserData:"fetchUserData"})},async created(){await this.fetchUserData(),await this.fetchCategories()}};c("7ec7");const _=C()(D,[["render",s]]);var A=_,E=c("9483");Object(E["a"])("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var S=c("6c02");const L={class:"home"},U=Object(a["h"])("h3",null,"Главная",-1),M=[U];function z(t,e,c,s,o,r){return Object(a["v"])(),Object(a["g"])("div",L,M)}var x={name:"Home",components:{}};const G=C()(x,[["render",z]]);var N=G;const F={class:"row auth-block"},I={class:"col s12"},V={class:"row"},B={class:"input-field col s12"},H=Object(a["h"])("label",{for:"username"},null,-1),$={class:"row"},T={class:"input-field col s12"},J=Object(a["h"])("label",{for:"password"},null,-1),R=["disabled"],q=["disabled"];function K(t,e,c,s,o,r){return Object(a["v"])(),Object(a["g"])("div",F,[Object(a["h"])("form",I,[Object(a["h"])("div",V,[Object(a["h"])("div",B,[Object(a["O"])(Object(a["h"])("input",{placeholder:"Логин",id:"username",type:"text",class:"validate","onUpdate:modelValue":e[0]||(e[0]=t=>o.username=t)},null,512),[[a["L"],o.username]]),H])]),Object(a["h"])("div",$,[Object(a["h"])("div",T,[Object(a["O"])(Object(a["h"])("input",{placeholder:"Пароль",id:"password",type:"password",class:"validate",autocomplete:"on","onUpdate:modelValue":e[1]||(e[1]=t=>o.password=t)},null,512),[[a["L"],o.password]]),J])]),Object(a["h"])("button",{class:"btn waves-effect waves-light red accent-1",type:"submit",name:"action",onClick:e[2]||(e[2]=Object(a["P"])((...t)=>r.submitLogin&&r.submitLogin(...t),["prevent"])),disabled:!o.username||!o.password},"Войти",8,R),Object(a["h"])("button",{class:"btn green accent-2",style:{"margin-left":"10px"},onClick:e[3]||(e[3]=Object(a["P"])((...t)=>r.submitRegistration&&r.submitRegistration(...t),["prevent"])),disabled:!o.username||!o.password},"Регистрация",8,q)])])}var Q=c("0180"),W={name:"Auth",data(){return{username:"",password:"",toast:Object(Q["b"])()}},computed:{...Object(f["c"])({isAuthorized:"isAuthorized"})},methods:{...Object(f["b"])({fetchLogin:"fetchLogin",fetchRegistration:"fetchRegistration"}),async submitLogin(){const t={username:this.username,password:this.password},{message:e}=await this.fetchLogin(t);e&&this.toast.error(e,{closeOnClick:!1,pauseOnFocusLoss:!0})},async submitRegistration(){const t={username:this.username,password:this.password},{message:e,errors:c}=await this.fetchRegistration(t);if(c)for(let a in c)this.toast.error(c[a].msg,{closeOnClick:!1,pauseOnFocusLoss:!0});e&&this.toast.success(e,{closeOnClick:!1,pauseOnFocusLoss:!0})}},watch:{isAuthorized(t){t&&this.$router.replace({path:"/"})}}};c("3288");const X=C()(W,[["render",K]]);var Y=X;const Z={class:"container"},tt={class:"row"},et={class:"col s12"},ct={class:"col s12"},at={class:"row"},st={class:"card card-panel hoverable card-panel__hover"},ot={class:"card-image"},rt=["src"],nt={class:"card-title"},it={class:"card-content card-content__align"},lt={class:"card-action card-action__align"};function ut(t,e,c,s,o,r){const n=Object(a["D"])("router-link");return Object(a["v"])(),Object(a["g"])("div",Z,[Object(a["h"])("div",tt,[Object(a["h"])("div",et,[Object(a["h"])("h3",null,Object(a["G"])(t.category.title),1)]),Object(a["h"])("div",ct,[Object(a["h"])("h6",null,Object(a["G"])(t.category.description),1)])]),Object(a["h"])("div",at,[(Object(a["v"])(!0),Object(a["g"])(a["a"],null,Object(a["B"])(t.products,t=>(Object(a["v"])(),Object(a["g"])("div",{class:"col s12 m6 xl4",key:t._id},[Object(a["h"])("div",st,[Object(a["j"])(n,{to:"/product/"+t._id},{default:Object(a["N"])(()=>[Object(a["h"])("div",ot,[Object(a["h"])("img",{src:t.imageUrl},null,8,rt),Object(a["h"])("span",nt,Object(a["G"])(t.title),1)]),Object(a["h"])("div",it,[Object(a["h"])("h6",null,"Описание: "+Object(a["G"])(t.description),1)]),Object(a["h"])("div",lt,[Object(a["h"])("div",null,"Цена: "+Object(a["G"])(t.price)+"р.",1),Object(a["h"])("div",null,"Кол-во на складе: "+Object(a["G"])(t.amount)+"шт.",1)])]),_:2},1032,["to"])])]))),128))])])}var dt={name:"Category",computed:{...Object(f["c"])({category:"category",products:"products"})},methods:{...Object(f["b"])({fetchCategory:"fetchCategory",fetchProducts:"fetchProducts"})},async created(){console.log("log created");const t=this.$route.params.id;await this.fetchCategory(t);const e=this.category.products.map(t=>t),c={id:t,product_ids:e};await this.fetchProducts(c)}};c("7d6b");const ht=C()(dt,[["render",ut]]);var bt=ht;const Ot={class:"container"},jt=Object(a["h"])("i",{class:"material-icons"},"chevron_left",-1),pt=Object(a["i"])("К категории"),gt={class:"row"};function mt(t,e,c,s,o,r){const n=Object(a["D"])("router-link");return Object(a["v"])(),Object(a["g"])("div",Ot,[Object(a["j"])(n,{to:"/"},{default:Object(a["N"])(()=>[jt,pt]),_:1}),Object(a["h"])("div",gt,Object(a["G"])(t.product),1)])}var vt={name:"Category",computed:{...Object(f["c"])({product:"product"})},methods:{...Object(f["b"])({fetchProduct:"fetchProduct"})},async created(){const t=this.$route.params.id;await this.fetchProduct(t)}};const ft=C()(vt,[["render",mt]]);var yt=ft;const wt={class:"container"};function Ct(t,e,c,s,o,r){const n=Object(a["D"])("ChatBox");return Object(a["v"])(),Object(a["g"])("div",wt,[Object(a["j"])(n,{onMessageHandler:r.messageHandler},null,8,["onMessageHandler"])])}const kt=t=>(Object(a["y"])("data-v-ea856962"),t=t(),Object(a["w"])(),t),Pt={class:"chat-box"},Dt={class:"chat-box-view"},_t={class:"chat-box-input"},At={class:"input-field"},Et={class:"row"},St={class:"col s1"},Lt=["disabled"],Ut=kt(()=>Object(a["h"])("i",{class:"material-icons right"},"send",-1)),Mt=[Ut];function zt(t,e,c,s,o,r){const n=Object(a["D"])("Message");return Object(a["v"])(),Object(a["g"])("div",Pt,[Object(a["h"])("div",Dt,[Object(a["j"])(n)]),Object(a["h"])("div",_t,[Object(a["h"])("div",At,[Object(a["h"])("div",Et,[Object(a["O"])(Object(a["h"])("input",{placeholder:"Введите сообщение",id:"message",type:"text",class:"validate col s11","onUpdate:modelValue":e[0]||(e[0]=t=>o.message=t)},null,512),[[a["L"],o.message]]),Object(a["h"])("div",St,[Object(a["h"])("button",{class:"btn waves-effect waves-light",type:"submit",name:"action",onClick:e[1]||(e[1]=Object(a["P"])((...t)=>r.submitMessage&&r.submitMessage(...t),["prevent"])),disabled:!this.message},Mt,8,Lt)])])])])])}const xt=t=>(Object(a["y"])("data-v-0bf825b6"),t=t(),Object(a["w"])(),t),Gt={key:0,class:"message-list"},Nt={class:"message-list-item--username"},Ft={class:"message-list-item--message"},It={key:1},Vt=xt(()=>Object(a["h"])("h5",null,"Нет сообщений",-1)),Bt=[Vt];function Ht(t,e,c,s,o,r){return Object(a["v"])(),Object(a["g"])("div",null,[t.chatData.length>0?(Object(a["v"])(),Object(a["g"])("ul",Gt,[(Object(a["v"])(!0),Object(a["g"])(a["a"],null,Object(a["B"])(t.chatData,e=>(Object(a["v"])(),Object(a["g"])("li",{key:e.id,class:Object(a["q"])({"message-list-item":!0,"message-list-item__own":e.userId===t.userData._id})},[Object(a["h"])("div",Nt,Object(a["G"])(e.username),1),Object(a["h"])("div",Ft,Object(a["G"])(e.msg),1)],2))),128))])):(Object(a["v"])(),Object(a["g"])("div",It,Bt))])}var $t={name:"Message",computed:{...Object(f["c"])({chatData:"chatData",userData:"userData"})}};c("0224");const Tt=C()($t,[["render",Ht],["__scopeId","data-v-0bf825b6"]]);var Jt=Tt,Rt={name:"ChatBox",components:{Message:Jt},emits:["messageHandler"],data(){return{message:""}},methods:{submitMessage(){this.$emit("messageHandler",this.message),this.message=""}}};c("00c4");const qt=C()(Rt,[["render",zt],["__scopeId","data-v-ea856962"]]);var Kt=qt,Qt=c("daa8");class Wt{constructor(){this.socket,this.userSocketId}setupSocketConnection(t){this.socket=Object(Qt["a"])("http://"+location.hostname),this.socket.emit("userJoin",t,t=>{this.userSocketId=t.userSocketId})}disconnect(){this.socket&&this.socket.disconnect()}}var Xt=new Wt,Yt={name:"Chat",data(){return{userSocketId:""}},computed:{...Object(f["c"])({isAuthorized:"isAuthorized",userData:"userData"})},methods:{...Object(f["b"])({fetchUserData:"fetchUserData",fetchChatData:"fetchChatData"}),messageHandler(t){const e={username:this.userData.username,msg:t};Xt.socket.emit("send-message",e),this.fetchChatData({...e,userId:this.userData._id})}},async created(){await this.fetchUserData(),this.isAuthorized||this.$router.replace({path:"/"});const t={id:this.userData._id,username:this.userData.username};Xt.setupSocketConnection(t),Xt.socket.on("broadcast",t=>{this.fetchChatData(t)}),Xt.socket.emit("userJoin",{id:this.userData._id,username:this.userData.username},t=>{"string"===typeof t?console.error(t):this.userSocketId=t.userId})},beforeUnmount(){Xt.disconnect()},components:{ChatBox:Kt}};const Zt=C()(Yt,[["render",Ct]]);var te=Zt;function ee(t,e,c,s,o,r){const n=Object(a["D"])("router-view");return Object(a["v"])(),Object(a["e"])(n)}var ce={};const ae=C()(ce,[["render",ee]]);var se=ae;const oe=t=>(Object(a["y"])("data-v-007dbf40"),t=t(),Object(a["w"])(),t),re=oe(()=>Object(a["h"])("h2",null,"Управление контентом",-1)),ne={class:"content-manage"},ie={class:"row"},le={class:"col s6"},ue=oe(()=>Object(a["h"])("h4",null,"Категории",-1)),de={class:"content-manage-category"},he={class:"collection"},be=oe(()=>Object(a["h"])("a",{href:"#!",class:"collection-item"},[Object(a["h"])("span",{class:"badge"},[Object(a["h"])("h6",null,"Продуктов:")]),Object(a["h"])("h6",null,"Название")],-1)),Oe={class:"collection-item-wrapper"},je={class:"badge"},pe=["onClick"],ge=oe(()=>Object(a["h"])("i",{class:"material-icons"},"delete_forever",-1)),me=[ge],ve={class:"content__add-item"},fe={class:"col s6"},ye=oe(()=>Object(a["h"])("h4",null,"Продукты",-1)),we={class:"content-manage-product"},Ce={class:"collection"},ke=oe(()=>Object(a["h"])("a",{href:"#!",class:"collection-item"},[Object(a["h"])("span",{class:"badge"},[Object(a["h"])("h6",null,"В наличии:")]),Object(a["h"])("h6",null,"Название")],-1)),Pe={class:"collection-item-wrapper"},De={class:"badge"},_e=["onClick"],Ae=oe(()=>Object(a["h"])("i",{class:"material-icons"},"delete_forever",-1)),Ee=[Ae],Se={class:"content__add-item"},Le={key:0,class:"content-modal"},Ue={class:"content-modal-block"},Me=oe(()=>Object(a["h"])("div",{class:"content-modal-block-title"},[Object(a["h"])("h5",null,"Новая категория")],-1)),ze={class:"content-modal-block-fields"},xe={class:"input-field"},Ge={class:"input-field"},Ne={class:"content-modal-block-submit"},Fe={key:1,class:"content-modal"},Ie={class:"content-modal-block"},Ve=oe(()=>Object(a["h"])("div",{class:"content-modal-block-title"},[Object(a["h"])("h5",null,"Новый продукт")],-1)),Be={class:"content-modal-block-fields"},He={class:"input-field"},$e={class:"input-field"},Te={class:"input-field"},Je={class:"input-field"},Re={class:"input-field"},qe={class:"input-field"},Ke=oe(()=>Object(a["h"])("option",{value:"",disabled:"",selected:""},null,-1)),Qe=["value"],We={class:"content-modal-block-submit"};function Xe(t,e,c,s,o,r){const n=Object(a["D"])("router-link");return Object(a["v"])(),Object(a["g"])("div",null,[re,Object(a["h"])("div",ne,[Object(a["h"])("div",ie,[Object(a["h"])("div",le,[ue,Object(a["h"])("div",de,[Object(a["h"])("div",he,[be,(Object(a["v"])(!0),Object(a["g"])(a["a"],null,Object(a["B"])(t.categories,t=>(Object(a["v"])(),Object(a["g"])("div",{class:"links-wrapper",key:t._id},[Object(a["h"])("div",Oe,[Object(a["j"])(n,{class:"collection-item",to:"/category/"+t._id},{default:Object(a["N"])(()=>[Object(a["i"])(Object(a["G"])(t.title),1),Object(a["h"])("span",je,Object(a["G"])(t.products.length),1)]),_:2},1032,["to"]),Object(a["h"])("button",{onClick:Object(a["P"])(e=>r.deleteCategory(t._id),["prevent"])},me,8,pe)])]))),128))]),Object(a["h"])("div",ve,[Object(a["h"])("button",{class:"btn",onClick:e[0]||(e[0]=t=>o.categoryModal=!o.categoryModal)},"Добавить")])])]),Object(a["h"])("div",fe,[ye,Object(a["h"])("div",we,[Object(a["h"])("div",Ce,[ke,(Object(a["v"])(!0),Object(a["g"])(a["a"],null,Object(a["B"])(t.products,t=>(Object(a["v"])(),Object(a["g"])("div",{class:"links-wrapper",key:t._id},[Object(a["h"])("div",Pe,[Object(a["j"])(n,{class:"collection-item",to:"/product/"+t._id},{default:Object(a["N"])(()=>[Object(a["i"])(Object(a["G"])(t.title),1),Object(a["h"])("span",De,Object(a["G"])(t.amount),1)]),_:2},1032,["to"]),Object(a["h"])("button",{onClick:Object(a["P"])(e=>r.deleteProduct(t._id),["prevent"])},Ee,8,_e)])]))),128))]),Object(a["h"])("div",Se,[Object(a["h"])("button",{class:"btn",onClick:e[1]||(e[1]=t=>o.productModal=!o.productModal)},"Добавить")])])])])]),o.categoryModal?(Object(a["v"])(),Object(a["g"])("div",Le,[Object(a["h"])("div",Ue,[Me,Object(a["h"])("div",ze,[Object(a["h"])("div",xe,[Object(a["i"])(Object(a["G"])(o.newCategory.title.view)+" ",1),Object(a["O"])(Object(a["h"])("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>o.newCategory.title.value=t)},null,512),[[a["L"],o.newCategory.title.value]])]),Object(a["h"])("div",Ge,[Object(a["i"])(Object(a["G"])(o.newCategory.description.view)+" ",1),Object(a["O"])(Object(a["h"])("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>o.newCategory.description.value=t)},null,512),[[a["L"],o.newCategory.description.value]])])]),Object(a["h"])("div",Ne,[Object(a["h"])("button",{class:"btn-small",onClick:e[4]||(e[4]=t=>r.addCategory(o.newCategory))},"Создать"),Object(a["h"])("button",{class:"btn-small red accent-1",onClick:e[5]||(e[5]=t=>o.categoryModal=!o.categoryModal)},"Отмена")])])])):Object(a["f"])("",!0),o.productModal?(Object(a["v"])(),Object(a["g"])("div",Fe,[Object(a["h"])("div",Ie,[Ve,Object(a["h"])("div",Be,[Object(a["h"])("div",He,[Object(a["i"])(Object(a["G"])(o.newProduct.title.view)+" ",1),Object(a["O"])(Object(a["h"])("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=t=>o.newProduct.title.value=t)},null,512),[[a["L"],o.newProduct.title.value]])]),Object(a["h"])("div",$e,[Object(a["i"])(Object(a["G"])(o.newProduct.description.view)+" ",1),Object(a["O"])(Object(a["h"])("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=t=>o.newProduct.description.value=t)},null,512),[[a["L"],o.newProduct.description.value]])]),Object(a["h"])("div",Te,[Object(a["i"])(Object(a["G"])(o.newProduct.price.view)+" ",1),Object(a["O"])(Object(a["h"])("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=t=>o.newProduct.price.value=t)},null,512),[[a["L"],o.newProduct.price.value]])]),Object(a["h"])("div",Je,[Object(a["i"])(Object(a["G"])(o.newProduct.amount.view)+" ",1),Object(a["O"])(Object(a["h"])("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=t=>o.newProduct.amount.value=t)},null,512),[[a["L"],o.newProduct.amount.value]])]),Object(a["h"])("div",Re,[Object(a["i"])(Object(a["G"])(o.newProduct.imageUrl.view)+" ",1),Object(a["O"])(Object(a["h"])("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=t=>o.newProduct.imageUrl.value=t)},null,512),[[a["L"],o.newProduct.imageUrl.value]])]),Object(a["h"])("div",qe,[Object(a["i"])(Object(a["G"])(o.newProduct.category.view)+" ",1),Object(a["O"])(Object(a["h"])("select",{class:"browser-default","onUpdate:modelValue":e[11]||(e[11]=t=>o.newProduct.category.value=t)},[Ke,(Object(a["v"])(!0),Object(a["g"])(a["a"],null,Object(a["B"])(t.categories,t=>(Object(a["v"])(),Object(a["g"])("option",{value:t._id,key:t._id},Object(a["G"])(t.title),9,Qe))),128))],512),[[a["K"],o.newProduct.category.value]])])]),Object(a["h"])("div",We,[Object(a["h"])("button",{class:"btn-small",onClick:e[12]||(e[12]=t=>r.addProduct(o.newProduct))},"Создать"),Object(a["h"])("button",{class:"btn-small red accent-1",onClick:e[13]||(e[13]=t=>o.productModal=!o.productModal)},"Отмена")])])])):Object(a["f"])("",!0)])}var Ye={name:"ProductsManager",data(){return{newCategory:{title:{view:"Название",value:""},description:{view:"Описание",value:""}},newProduct:{title:{view:"Название",value:""},description:{view:"Описание",value:""},price:{view:"Цена",value:""},amount:{view:"В наличии",value:""},imageUrl:{view:"Ссылка на изображение",value:""},category:{view:"Категория",value:""}},categoryModal:!1,productModal:!1,toast:Object(Q["b"])()}},computed:{...Object(f["c"])({categories:"categories",categoryStatus:"categoryStatus",categoryError:"categoryError",products:"products",productStatus:"productStatus",productError:"productError"})},methods:{...Object(f["b"])({fetchAllProducts:"fetchAllProducts",fetchNewCategory:"fetchNewCategory",fetchDeleteCategory:"fetchDeleteCategory",fetchNewProduct:"fetchNewProduct",fetchDeleteProduct:"fetchDeleteProduct"}),async addCategory(t){if(this.formValidate(t))try{await this.fetchNewCategory(t),200!==this.categoryStatus?this.toast.error("Ошибка! "+this.categoryError,{closeOnClick:!1,pauseOnFocusLoss:!0}):this.toast.success("Успешно создан",{closeOnClick:!1,pauseOnFocusLoss:!0}),this.categoryModal=!this.categoryModal}catch(e){this.toast.error("Ошибка! "+e,{closeOnClick:!1,pauseOnFocusLoss:!0})}},async deleteCategory(t){try{await this.fetchDeleteCategory(t),200!==this.categoryStatus?this.toast.error("Ошибка! "+this.categoryStatus,{closeOnClick:!1,pauseOnFocusLoss:!0}):this.toast.success("Успешно удалён",{closeOnClick:!1,pauseOnFocusLoss:!0})}catch(e){this.toast.error("Ошибка! "+e,{closeOnClick:!1,pauseOnFocusLoss:!0})}},async addProduct(t){if(this.formValidate(t))try{await this.fetchNewProduct(t),200!==this.productStatus?this.toast.error("Ошибка! "+this.productError,{closeOnClick:!1,pauseOnFocusLoss:!0}):this.toast.success("Успешно создан",{closeOnClick:!1,pauseOnFocusLoss:!0}),this.productModal=!this.productModal}catch(e){this.toast.error("Ошибка! "+e,{closeOnClick:!1,pauseOnFocusLoss:!0})}},async deleteProduct(t){try{await this.fetchDeleteProduct(t),200!==this.productStatus?this.toast.error("Ошибка! "+this.productError,{closeOnClick:!1,pauseOnFocusLoss:!0}):this.toast.success("Успешно удалён",{closeOnClick:!1,pauseOnFocusLoss:!0})}catch(e){this.toast.error("Ошибка! "+e,{closeOnClick:!1,pauseOnFocusLoss:!0})}},formValidate(t){for(let e in t)if(0===t[e].value.length)return this.toast.error(`Поле ${t[e].view} не может быть пустым!`,{closeOnClick:!1,pauseOnFocusLoss:!0}),!1;return!0}},async created(){await this.fetchAllProducts()}};c("17b7");const Ze=C()(Ye,[["render",Xe],["__scopeId","data-v-007dbf40"]]);var tc=Ze;const ec=[{path:"/",name:"Home",component:N},{path:"/auth",name:"Auth",component:Y},{path:"/category/:id",name:"category",component:bt,props:!0},{path:"/product/:id",name:"product",component:yt},{path:"/chat",name:"chat",component:te},{path:"/admin",name:"admin",component:se,children:[{path:"products-manager",name:"ProductsManager",component:tc}]}],cc=Object(S["a"])({history:Object(S["b"])("/"),routes:ec});var ac=cc,sc=c("bc3a"),oc=c.n(sc);const rc="http://localhost:8081/api/v1",nc=async({url:t,method:e,data:c,headers:a})=>{const s=await oc.a[e](`${rc}/${t}`,c,a);return s},ic=t=>nc({url:"products/"+t,method:"get"}),lc=(t,e)=>nc({url:"products/"+t,method:"post",data:e}),uc=()=>nc({url:"products",method:"get"}),dc=t=>nc({url:"products",method:"post",data:t}),hc=t=>nc({url:"products/"+t,method:"delete"}),bc=()=>({product:{},products:[],productError:null,productStatus:null}),Oc={setProduct(t,e){t.product=e},setProducts(t,e){t.products=e},setProductStatus(t,e){t.productStatus=e},setProductError(t,e){t.productError=e}},jc={async fetchProduct({commit:t},e){try{const{data:c}=await ic(e);t("setProduct",c)}catch(c){t("setProductError",c)}},async fetchProducts({commit:t},{id:e,product_ids:c}){try{const{data:a}=await lc(e,c);t("setProducts",a)}catch(a){t("setProductError",a)}},async fetchAllProducts({commit:t}){try{const{data:e}=await uc();t("setProducts",e)}catch(e){t("setProductError",e)}},async fetchNewProduct({commit:t},e){try{const c={};for(let t in e)c[t]=e[t].value;const a=await dc(c);t("setProductStatus",a.status)}catch(c){t("setProductError",c)}},async fetchDeleteProduct({commit:t},e){try{const c=await hc(e);t("setProductStatus",c.status);const{data:a}=await uc();t("setProducts",a)}catch(c){t("setProductError",c)}}},pc={product:({product:t})=>t,products:({products:t})=>t,productError:({productError:t})=>t,productStatus:({productStatus:t})=>t};var gc={mutations:Oc,getters:pc,actions:jc,state:bc};const mc=t=>nc({url:"categories/"+t,method:"get"}),vc=()=>nc({url:"categories",method:"get"}),fc=t=>nc({url:"categories",method:"post",data:t}),yc=t=>nc({url:"categories/"+t,method:"delete"}),wc=()=>({category:{},categories:[],categoryError:null,categoryStatus:null}),Cc={setCategory(t,e){t.category=e},setCategories(t,e){t.categories=e},setCategoryStatus(t,e){t.categoryStatus=e},setCategoryError(t,e){t.categoryError=e}},kc={async fetchCategory({commit:t},e){try{const{data:c}=await mc(e);t("setCategory",c)}catch(c){t("setCategoryError",c)}},async fetchCategories({commit:t}){try{const e=await vc();t("setCategories",e.data)}catch(e){t("setCategoryError",e)}},async fetchNewCategory({commit:t},e){try{const c={};for(let t in e)c[t]=e[t].value;const a=await fc(c);console.log("res new category",a,a.status),t("setCategoryStatus",a.status)}catch(c){t("setCategoryError",c)}},async fetchDeleteCategory({commit:t},e){try{const c=await yc(e);t("setCategoryStatus",c.status);const{data:a}=await vc();t("setCategories",a)}catch(c){t("setProductError",c)}}},Pc={category:({category:t})=>t,categories:({categories:t})=>t,categoryStatus:({categoryStatus:t})=>t,categoryError:({categoryError:t})=>t};var Dc={mutations:Cc,getters:Pc,actions:kc,state:wc};const _c=async t=>await oc.a.post("http://localhost:8081/api/v1/authorization/userData",{},{headers:{Authorization:"bearer "+t}}),Ac=t=>nc({url:"authorization/login",method:"post",data:t}),Ec=t=>nc({url:"authorization/registration",method:"post",data:t}),Sc=()=>({isAuthorized:!1,isAdmin:!1,userData:{},userError:null,jwt:localStorage.getItem("jwt")}),Lc={setAuthorize(t,e){t.isAuthorized=e},setUserData(t,e){t.userData=e},setJwt(t,e){t.jwt=e},setAdmin(t,e){t.isAdmin=e},setUserError(t,e){t.productError=e}},Uc={async fetchUserData({commit:t,state:e}){try{const{data:c}=await _c(e.jwt);if(c.message)t("setUserData",{}),t("setAuthorize",!1),t("setAdmin",!1),this.$router.replace({path:"/"});else{t("setUserData",c),t("setAuthorize",!0);const e=c.roles.includes("ADMIN");t("setAdmin",e)}}catch(c){t("setUserError",c)}},async fetchLogin({commit:t,dispatch:e},c){try{const{data:a}=await Ac(c);return a.message?a:(localStorage.setItem("jwt",a.token),t("setJwt",a.token),e("fetchUserData"),!0)}catch(a){t("setUserError",a)}},async fetchRegistration({commit:t},e){try{const{data:t}=await Ec(e);if(t)return t}catch(c){t("setUserError",c)}},async fetchLogout({commit:t,dispatch:e}){try{localStorage.setItem("jwt",""),t("setJwt",""),e("fetchUserData")}catch(c){t("setUserError",c)}}},Mc={isAuthorized:({isAuthorized:t})=>t,isAdmin:({isAdmin:t})=>t,userData:({userData:t})=>t,userError:({userError:t})=>t};var zc={mutations:Lc,getters:Mc,actions:Uc,state:Sc};const xc=()=>({chatData:[],chatDataError:null}),Gc={setChatData(t,e){t.chatData.push(e)},setChatDataError(t,e){t.chatDataError=e}},Nc={fetchChatData({commit:t},e){t("setChatData",e)}},Fc={chatData:({chatData:t})=>t,chatDataError:({chatDataError:t})=>t};var Ic={mutations:Gc,getters:Fc,actions:Nc,state:xc},Vc=Object(f["a"])({modules:{product:gc,category:Dc,userData:zc,chat:Ic}});c("8266"),c("619b"),c("da96");Object(a["d"])(A).use(Vc).use(ac).use(Q["a"],{transition:"Vue-Toastification__bounce",maxToasts:10,newestOnTop:!0}).mount("#app")},6356:function(t,e,c){},"7ae8":function(t,e,c){},"7d6b":function(t,e,c){"use strict";c("0876")},"7ec7":function(t,e,c){"use strict";c("6356")},a12e:function(t,e,c){},a227:function(t,e,c){},aac9:function(t,e,c){},becc:function(t,e,c){"use strict";c("7ae8")}});
//# sourceMappingURL=app.82eff188.js.map